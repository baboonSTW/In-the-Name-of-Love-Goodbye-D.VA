#include <reg52.h>

sbit BEEP = P1 ^ 5;
//从低八度0-6开始到中八度7-13到高八度14-20
code const unsigned int FREQUENCY[] = {637, 568, 506, 477, 425, 379, 337, 319, 284, 253, 239, 213, 189, 169, 159, 142, 126, 119, 106, 95, 84};
//乐谱，音调,指出该播放哪个音，对应FREQUENCY
code const unsigned char SOUNDTONE[] = 
{8,7,8,7,8,9,11,9,8,8,7,8,7,8,9,8,7,4,8,7,8,7,8,9,11,9,8,8,9,8,7,8,8,8,8,7,8,7,8,9,11,9,8,8,9,8,7,5,5,9,8,7,8,7,9,8,7,8,7,4,9,8,7,8,7,7,7,8,9,7,12,11,12,12,7,13,12,13,13,13,12,13,13,9,14,15,14,13,12,11,12,11,12,12,11,12,11,12,11,8,8,11,9,9,9,7,8,9,7,12,11,12,12,7,13,12,13,13,13,12,12,12,9,14,15,14,13,12,11,12,16,16,16,11,12,16,16,16,11,12,12,12,12,14,15,16,19,18,18,19,18,18,19,18,18,15,16,16,19,18,18,19,18,18,19,18,18,15,16,15,14,12,12,14,14,15,14,12,12,14,16,16,17,16,15,16,15,14,15,16,19,18,18,19,18,18,19,18,18,16,16,19,18,18,19,18,18,19,18,18,16,15,14,12,12,16,15,14,12,12,14,14,14,14,12,16,15,14,12,12,16,15,15,14,12,12,14,14,14,14,14};
	//声音的持续时间
code const unsigned int SOUNDLENGTH[] = 
{216,60,216,60,144,156,186,78,72,216,60,216,60,72,78,72,60,192,216,60,216,60,144,156,186,78,72,216,78,144,60,72,288,288,216,60,216,60,144,156,186,78,72,216,78,144,60,54,216,78,72,60,72,240,78,72,60,72,180,48,78,72,60,72,240,240,120,144,156,120,210,93,105,315,60,240,105,120,480,240,105,120,360,78,126,141,126,120,210,186,210,93,105,105,93,105,93,210,93,72,144,93,78,312,312,120,144,156,120,210,93,105,315,60,240,105,120,480,240,105,105,315,78,126,141,126,120,210,186,210,159,159,318,186,210,159,159,318,93,105,420,420,420,252,282,318,210,189,378,210,189,378,210,189,378,141,159,318,210,189,378,210,189,378,210,189,378,141,159,282,126,105,210,126,126,141,126,210,105,378,636,159,168,159,141,159,423,252,282,318,210,189,378,210,189,378,210,189,378,318,318,210,189,378,210,189,378,210,189,189,477,282,126,105,105,477,141,126,210,105,378,504,504,504,105,477,282,126,105,105,318,141,141,252,105,210,252,504,504,504,504};
	unsigned int pointer = 0;
unsigned int soundplayLength = 0;
unsigned int soundFrequency = 0;

void delay(int);
void main()
{
    for (; pointer < 241; pointer++)
    {
        soundplayLength = SOUNDLENGTH[pointer];
        soundFrequency = FREQUENCY[SOUNDTONE[pointer]];
        while (soundplayLength--)
        {
            BEEP = ~BEEP;
            delay(soundFrequency);
        }
    }
		P2 = 0x00;
}

void delay(int counter)
{
    while (counter--)
        ;
}